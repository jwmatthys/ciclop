#N canvas 130 150 803 495 10;
#X obj 241 61 env~ 2048;
#X obj 22 403 *~;
#X obj 38 380 line~;
#X obj 285 186 t b f;
#X obj 285 246 /;
#X obj 285 309 pack;
#X obj 285 266 t f b;
#X obj 241 127 moses 1;
#X msg 285 207 1;
#X obj 241 104 dbtorms;
#X obj 241 82 + 5;
#X text 8 23 lcb 09.24.2005;
#X obj 241 13 inlet~;
#X text 441 38 delay signal 20 msec to allow for look-ahead;
#X text 315 61 get current windowed RMS amplitude;
#X text 268 83 increase value to account for peak-to-peak amp;
#X text 297 104 convert from dB to 0 <= x <= 1;
#X text 297 128 if amplitude is > 1...;
#X text 334 150 increase value slightly for safety / "headroom";
#X obj 22 426 outlet~;
#X text 316 247 multiply output by 1/amplitude;
#X text 189 364 is identical delay time and window length correct?
;
#X text 191 380 seems likely that delay time increases (to 25 or more?)
;
#X text 190 396 and ramp time decreases (to 3.5 if delay is 25?);
#X text 191 412 but test this by ear and see how it works....;
#X text 9 37 updated 09.30.2005 after testing;
#X msg 315 287 3.5;
#X obj 258 38 delwrite~ \$0-compdelay 25;
#X obj 22 130 delread~ \$0-compdelay 25;
#X msg 241 150 1 3.5;
#X text 189 440 works except for *extremely* violent transients;
#X text 188 454 [like 0->16 over 5 msec];
#X text 8 9 simple look-ahead peak-limiter;
#X obj 285 150 + 0.02;
#X text 334 163 (changed from 0.01 to 0.05 7.19.2006);
#X connect 0 0 10 0;
#X connect 1 0 19 0;
#X connect 2 0 1 1;
#X connect 3 0 8 0;
#X connect 3 1 4 1;
#X connect 4 0 6 0;
#X connect 5 0 2 0;
#X connect 6 0 5 0;
#X connect 6 1 26 0;
#X connect 7 0 29 0;
#X connect 7 1 33 0;
#X connect 8 0 4 0;
#X connect 9 0 7 0;
#X connect 10 0 9 0;
#X connect 12 0 0 0;
#X connect 12 0 27 0;
#X connect 26 0 5 1;
#X connect 28 0 1 0;
#X connect 29 0 2 0;
#X connect 33 0 3 0;
